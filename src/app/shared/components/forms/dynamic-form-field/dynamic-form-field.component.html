<div>
  <ng-container [formGroup]="form">
    <ng-container [ngSwitch]="formItem.type">
      <!-- text input -->
      <div *ngSwitchCase="FormFieldTypeEnum.Text" class="w-full">
        <app-text-input [form]="form"></app-text-input>
        @if (formItem.validators) {
        <app-dynamic-error
          [validators]="formItem.validators"
          [form]="form"
          [formItem]="formItem.id"
        ></app-dynamic-error>
        }
      </div>
      <!-- select -->
      <mat-form-field *ngSwitchCase="FormFieldTypeEnum.Select" class="w-full">
        <mat-label>{{ formItem.label }}</mat-label>
        <mat-select formControlName="{{ formItem.id }}" multiple>
          <mat-select-trigger>
            {{ form.get(formItem.id)?.value[0]?.label || '' }}
            <span *ngIf="((form.get(formItem.id)?.value)!.length || 0) > 1">
              (+{{ (form.get(formItem.id)?.value?.length || 0) - 1 }}
              {{ form.get(formItem.id)?.value?.length === 2 ? 'other' : 'others' }})
            </span>
          </mat-select-trigger>
          <mat-option *ngFor="let menuOption of formItem.options" [value]="menuOption">{{
            menuOption.label
          }}</mat-option>
        </mat-select>
        @if (formItem.validators) {
        <app-dynamic-error
          [validators]="formItem.validators"
          [form]="form"
          [formItem]="formItem.id"
        ></app-dynamic-error>
        }
      </mat-form-field>
      <!-- checkbox -->
      <div *ngSwitchCase="FormFieldTypeEnum.Checkbox" class="mb-8" formGroupName="{{ formItem.id }}">
        <h4>{{ formItem.label }}:</h4>
        <ul class="max-h-80 overflow-auto">
          <li *ngFor="let item of formItem.options">
            <p>
              <mat-checkbox color="primary" formControlName="{{ item.value }}">{{ item.label }}</mat-checkbox>
            </p>
          </li>
        </ul>
        @if (formItem.validators) {
        <app-dynamic-error
          [validators]="formItem.validators"
          [form]="form"
          [formItem]="formItem.id"
        ></app-dynamic-error>
        }
      </div>
      <!-- slider -->
      <div *ngSwitchCase="FormFieldTypeEnum.Slider" class="mb-8">
        <app-slider [formItem]="formItem"></app-slider>
        @if (formItem.validators) {
        <app-dynamic-error [validators]="formItem.validators" [form]="form" [formItem]="formItem.id">
        </app-dynamic-error>
        }
      </div>
    </ng-container>
  </ng-container>
</div>
