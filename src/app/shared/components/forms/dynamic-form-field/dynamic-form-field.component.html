<div>
  <ng-container [formGroup]="form">
    <ng-container [ngSwitch]="formItem.type">
      <mat-form-field *ngSwitchCase="FormFieldTypeEnum.Text" class="w-full">
        <mat-label>{{ formItem.label }}</mat-label>
        <input matInput type="text" formControlName="{{ formItem.id }}" />
      </mat-form-field>
      <mat-form-field *ngSwitchCase="FormFieldTypeEnum.Select" class="w-full">
        <mat-label>{{ formItem.label }}</mat-label>
        <mat-select formControlName="{{ formItem.id }}" multiple>
          <mat-select-trigger>
            {{ form.get(formItem.id)?.value[0]?.label || '' }}
            <span *ngIf="((form.get(formItem.id)?.value)!.length || 0) > 1">
              (+{{ (form.get(formItem.id)?.value?.length || 0) - 1 }}
              {{ form.get(formItem.id)?.value?.length === 2 ? 'other' : 'others' }})
            </span>
          </mat-select-trigger>
          <mat-option *ngFor="let menuOption of formItem.options" [value]="menuOption">{{
            menuOption.label
          }}</mat-option>
        </mat-select>
      </mat-form-field>
      <div *ngSwitchCase="FormFieldTypeEnum.Checkbox" class="mb-8" formGroupName="{{ formItem.id }}">
        <h4>{{ formItem.label }}:</h4>
        <ul class="max-h-80 overflow-auto">
          <li *ngFor="let item of formItem.options">
            <p>
              <mat-checkbox color="primary" formControlName="{{ item.value }}">{{ item.label }}</mat-checkbox>
            </p>
          </li>
        </ul>
      </div>
      <div *ngSwitchCase="FormFieldTypeEnum.Slider" class="mb-8">
        <h4>{{ formItem.label }}:</h4>
        <mat-slider min="{{ formItem.min }}" max="{{ formItem.max }}" formGroupName="{{ formItem.id }}" discrete>
          @if (formItem.options) {
          <input
            value="{{ formItem.options[0].value }}"
            matSliderStartThumb
            formControlName="{{ formItem.options[0].label }}"
          />
          <input
            matInput
            value="{{ formItem.options[1].value }}"
            matSliderEndThumb
            formControlName="{{ formItem.options[1].label }}"
          />
          }
        </mat-slider>
        <div class="flex justify-between align-center">
          <div class="mt-2 w-1/3">
            <mat-form-field class="w-full" style="width: 100% !important">
              <mat-label>Min:</mat-label>
              <input
                matInput
                type="text"
                [value]="form.value[formItem.id].min"
                (input)="updateSliderValue($event, formItem.id, 'min')"
              />
            </mat-form-field>
          </div>
          <div class="mt-2 w-1/3">
            <mat-form-field style="width: 100% !important">
              <mat-label>Max:</mat-label>
              <input
                matInput
                type="text"
                [value]="form.value[formItem.id].max"
                (input)="updateSliderValue($event, formItem.id, 'max')"
              />
            </mat-form-field>
          </div>
        </div>
      </div>
    </ng-container>
  </ng-container>
</div>
